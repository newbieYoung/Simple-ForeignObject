{"version":3,"sources":["webpack://SimpleScreenshot/webpack/universalModuleDefinition","webpack://SimpleScreenshot/webpack/bootstrap","webpack://SimpleScreenshot/./index-web.js","webpack://SimpleScreenshot/./node_modules/prefix-umd/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Prefix","Array","includes","valueToFind","fromIndex","this","len","length","k","Math","max","abs","x","y","isNaN","dashTransform","dash","dashOrigin","URL_REGEX","contentExit","computedStyle","content","display","exist","trim","RESOURCE_NAME","RESOURCE_DATA","isFunction","obj","toString","COMPUTED_STYLE","SimpleScreenshot","params","devicePixelRatio","error","log","console","puppeteerServer","puppeteerGlobalFont","pupServerCanModifyFont","imgType","imgQuality","parseInt","distWidth","distHeight","debug","supportForeignObject","forceScreenshotType","checkForeignObject","_isLoading","_wholeTexts","_globalInlineFont","list","globalInlineFont","fontList","push","texts","preLoadResource","data","parentCSS","parseCSSFilter","rules","autoRenderWidth","analysisStyleSheets","_hasWidthNodes","_hasHeightNodes","styleSheets","document","sheet","j","cssRules","rule","type","style","width","nodes","querySelectorAll","selectorText","z","loadResource","fontFamily","src","err","svg","self","img","Image","encodeURIComponent","onload","canvas","createElement","height","ctx","getContext","drawImage","imgData","getImageData","nodeItem","node","level","nodeType","Node","ELEMENT_NODE","tagName","toLowerCase","$node","dataset","after","before","getAttribute","getComputedStyle","start","childs","childNodes","child","toSVG","selector","callback","$first","querySelector","parseCSSRules","getNodeByLevel","rect","getBoundingClientRect","parseFloat","html","toHTML","calcParentProperty","pCSS","fonts","$target","parentElement","css","getPropertyValue","toIMG","index","indexOf","substring","base64","toCanvas","toDataURL","globalFont","xhr","XMLHttpRequest","open","onerror","ontimeout","response","send","JSON","stringify","isRoot","inner","cssTexts","parseCSS","curNode","getNodeStyle","fontItem","wholeText","replace","_rules","filter","setNodeStyle","parseBackgroundImage","nodeV","n1","afterV","n2","beforeV","n3","bgValue","matches","isReplaceResource","lastIndex","exec","url","search","finished","count","add","del","bgImg","afterImg","beforeImg","getType","types","names","lastIndexOf","resource","responseType","timeout","msg","reader","FileReader","result","readAsDataURL","prefixes","upper","memo","prefix","_","char","toUpperCase","undefined","Key","charAt","slice","test"],"mappings":"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CA,0BACA,mBACA,mBACA,SACA,aACA,aACA,cACA,eACA,eACA,eACA,QACA,OACA,QACA,UACA,SACA,YACA,UACA,cACA,QACA,cACA,eACA,sBACA,YACA,eACA,aACA,eACA,yBACA,oBACA,uBACA,0BACA,cACA,kBACA,YACA,gBACA,eACA,OACA,iBACA,cACA,mBACA,sBACA,kBACA,gBACA,cACA,eACA,aACA,aACA,YACA,aACA,YACA,iBACA,aACA,kBACA,kBACA,cACA,gBACA,UACA,UACA,gBACA,iBACA,gBACA,gBACA,kBACA,gBACA,aACA,aACA,iBACA,eACA,gBACA,cACA,iBACA,WACA,SACA,QACA,kBACA,QACA,eACA,WACA,aACA,kBACA,kBACA,uBACA,wBACA,wBACA,2BACA,0BACA,cACA,iBACA,cACA,mBACA,gBACA,iBACA,MACA,eACA,eACA,iBACA,aACA,cACA,SACA,cACA,aACA,eACA,UACA,OACA,qBACA,sBACA,oCACA,uBACA,kCACA,oBACA,+BACA,wBACA,mBACA,4BACA,qBACA,mBACA,sBACA,eACA,aACA,oBACA,oBACA,oBACA,cACA,eACA,kBACA,gBACA,cACA,aACA,aACA,YACA,cACA,iBACA,YACA,kBACA,yBACA,oBACA,iBACA,iBACA,kBACA,oBACA,sBACA,wBACA,qBACA,eACA,iBACA,UACA,oBACA,UACA,8BACA,qBACA,qBACA,iBACA,iCACA,gCACA,yBACA,gCACA,gCACA,+BACA,gCACA,+BACA,oBACA,yBACA,qBACA,sBACA,wBACA,sBACA,oBACA,QACA,cACA,qBACA,6BACA,uBACA,gBACA,wBACA,eACA,8BACA,uBACA,qCACA,8BACA,iCACA,8BACA,0BACA,2BACA,wBACA,4BACA,4BACA,YACA,mBACA,kBACA,oBACA,sBACA,cACA,uBACA,qBACA,qBACA,YACA,YACA,OACA,SACA,cACA,gBACA,iBACA,aACA,eACA,sBACA,8BACA,kBACA,OACA,eACA,YACA,aACA,aACA,eACA,YACA,kBACA,SACA,mB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","file":"index-web.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"simplescreenshot\"] = factory();\n\telse\n\t\troot[\"SimpleScreenshot\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* global define module require */\n(function (factory) {\n  if (typeof define === \"function\" && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['prefix-umd'], factory);\n  } else if (typeof module === \"object\" && module.exports) {\n    // Node/CommonJS\n    module.exports = factory(require('prefix-umd'));\n  } else {\n    // Browser globals\n    window.SimpleScreenshot = factory(window.Prefix);\n  }\n})(function (Prefix) {\n\n  //includes方法兼容\n  if (!Array.prototype.includes) {\n    Object.defineProperty(Array.prototype, 'includes', {\n      value: function (valueToFind, fromIndex) {\n        let o = Object(this);\n        let len = o.length >>> 0;\n        if (len === 0) {\n          return false;\n        }\n\n        let n = fromIndex | 0;\n        let k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n        function sameValueZero(x, y) {\n          return x === y || (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));\n        }\n        while (k < len) {\n          if (sameValueZero(o[k], valueToFind)) {\n            return true;\n          }\n          k++;\n        }\n        return false;\n      }\n    });\n  }\n\n  let dashTransform = Prefix.dash(\"transform\");\n  let dashOrigin = Prefix.dash(\"transformOrigin\");\n  let URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n  // 根据 computedStyle 判断伪类是否存在，此外还可以通过遍历 styleSheets 来判断。\n  let contentExit = function (computedStyle) {\n    let content = computedStyle['content'];\n    let display = computedStyle['display'];\n    let exist = true;\n    if (content != null) {\n      content = content.trim();\n      if (content == 'none' || (content == '' && display == 'inline')) {\n        exist = false;\n      }\n    } else {\n      exist = false;\n    }\n\n    if (!display || display == 'none') {\n      exist = false;\n    }\n\n    return exist;\n  }\n\n  let RESOURCE_NAME = [];\n  let RESOURCE_DATA = [];\n\n  function isFunction(obj) { // 判断对象是否是function\n    return obj && {}.toString.call(obj) === \"[object Function]\";\n  }\n\n  const COMPUTED_STYLE = [\n    \"width\",\n    \"height\",\n    \"background-attachment\",\n    \"background-blend-mode\",\n    \"background-clip\",\n    \"-webkit-background-clip\",\n    \"background-color\",\n    \"background-image\",\n    \"background-origin\",\n    \"background-position\",\n    \"background-repeat\",\n    \"background-size\",\n    \"border-bottom-color\",\n    \"border-bottom-left-radius\",\n    \"border-bottom-right-radius\",\n    \"border-bottom-style\",\n    \"border-bottom-width\",\n    \"border-collapse\",\n    \"border-image-outset\",\n    \"border-image-repeat\",\n    \"border-image-slice\",\n    \"border-image-source\",\n    \"border-image-width\",\n    \"border-left-color\",\n    \"border-left-style\",\n    \"border-left-width\",\n    \"border-right-color\",\n    \"border-right-style\",\n    \"border-right-width\",\n    \"border-top-color\",\n    \"border-top-left-radius\",\n    \"border-top-right-radius\",\n    \"border-top-style\",\n    \"border-top-width\",\n    \"bottom\",\n    \"box-shadow\",\n    \"box-sizing\",\n    \"break-after\",\n    \"break-before\",\n    \"break-inside\",\n    \"caption-side\",\n    \"clear\",\n    \"clip\",\n    \"color\",\n    \"content\",\n    \"cursor\",\n    \"direction\",\n    \"display\",\n    \"empty-cells\",\n    \"float\",\n    \"font-family\",\n    \"font-kerning\",\n    \"font-optical-sizing\",\n    \"font-size\",\n    \"font-stretch\",\n    \"font-style\",\n    \"font-variant\",\n    \"font-variant-ligatures\",\n    \"font-variant-caps\",\n    \"font-variant-numeric\",\n    \"font-variant-east-asian\",\n    \"font-weight\",\n    \"image-rendering\",\n    \"isolation\",\n    \"justify-items\",\n    \"justify-self\",\n    \"left\",\n    \"letter-spacing\",\n    \"line-height\",\n    \"list-style-image\",\n    \"list-style-position\",\n    \"list-style-type\",\n    \"margin-bottom\",\n    \"margin-left\",\n    \"margin-right\",\n    \"margin-top\",\n    \"max-height\",\n    \"max-width\",\n    \"min-height\",\n    \"min-width\",\n    \"mix-blend-mode\",\n    \"object-fit\",\n    \"object-position\",\n    \"offset-distance\",\n    \"offset-path\",\n    \"offset-rotate\",\n    \"opacity\",\n    \"orphans\",\n    \"outline-color\",\n    \"outline-offset\",\n    \"outline-style\",\n    \"outline-width\",\n    \"overflow-anchor\",\n    \"overflow-wrap\",\n    \"overflow-x\",\n    \"overflow-y\",\n    \"padding-bottom\",\n    \"padding-left\",\n    \"padding-right\",\n    \"padding-top\",\n    \"pointer-events\",\n    \"position\",\n    \"resize\",\n    \"right\",\n    \"scroll-behavior\",\n    \"speak\",\n    \"table-layout\",\n    \"tab-size\",\n    \"text-align\",\n    \"text-align-last\",\n    \"text-decoration\",\n    \"text-decoration-line\",\n    \"text-decoration-style\",\n    \"text-decoration-color\",\n    \"text-decoration-skip-ink\",\n    \"text-underline-position\",\n    \"text-indent\",\n    \"text-rendering\",\n    \"text-shadow\",\n    \"text-size-adjust\",\n    \"text-overflow\",\n    \"text-transform\",\n    \"top\",\n    \"touch-action\",\n    \"unicode-bidi\",\n    \"vertical-align\",\n    \"visibility\",\n    \"white-space\",\n    \"widows\",\n    \"will-change\",\n    \"word-break\",\n    \"word-spacing\",\n    \"z-index\",\n    \"zoom\",\n    \"-webkit-appearance\",\n    \"backface-visibility\",\n    \"-webkit-border-horizontal-spacing\",\n    \"-webkit-border-image\",\n    \"-webkit-border-vertical-spacing\",\n    \"-webkit-box-align\",\n    \"-webkit-box-decoration-break\",\n    \"-webkit-box-direction\",\n    \"-webkit-box-flex\",\n    \"-webkit-box-ordinal-group\",\n    \"-webkit-box-orient\",\n    \"-webkit-box-pack\",\n    \"-webkit-box-reflect\",\n    \"column-count\",\n    \"column-gap\",\n    \"column-rule-color\",\n    \"column-rule-style\",\n    \"column-rule-width\",\n    \"column-span\",\n    \"column-width\",\n    \"backdrop-filter\",\n    \"align-content\",\n    \"align-items\",\n    \"align-self\",\n    \"flex-basis\",\n    \"flex-grow\",\n    \"flex-shrink\",\n    \"flex-direction\",\n    \"flex-wrap\",\n    \"justify-content\",\n    \"-webkit-font-smoothing\",\n    \"grid-auto-columns\",\n    \"grid-auto-flow\",\n    \"grid-auto-rows\",\n    \"grid-column-end\",\n    \"grid-column-start\",\n    \"grid-template-areas\",\n    \"grid-template-columns\",\n    \"grid-template-rows\",\n    \"grid-row-end\",\n    \"grid-row-start\",\n    \"row-gap\",\n    \"-webkit-highlight\",\n    \"hyphens\",\n    \"-webkit-hyphenate-character\",\n    \"-webkit-line-break\",\n    \"-webkit-line-clamp\",\n    \"-webkit-locale\",\n    \"-webkit-margin-before-collapse\",\n    \"-webkit-margin-after-collapse\",\n    \"-webkit-mask-box-image\",\n    \"-webkit-mask-box-image-outset\",\n    \"-webkit-mask-box-image-repeat\",\n    \"-webkit-mask-box-image-slice\",\n    \"-webkit-mask-box-image-source\",\n    \"-webkit-mask-box-image-width\",\n    \"-webkit-mask-clip\",\n    \"-webkit-mask-composite\",\n    \"-webkit-mask-image\",\n    \"-webkit-mask-origin\",\n    \"-webkit-mask-position\",\n    \"-webkit-mask-repeat\",\n    \"-webkit-mask-size\",\n    \"order\",\n    \"perspective\",\n    \"perspective-origin\",\n    \"-webkit-print-color-adjust\",\n    \"-webkit-rtl-ordering\",\n    \"shape-outside\",\n    \"shape-image-threshold\",\n    \"shape-margin\",\n    \"-webkit-tap-highlight-color\",\n    \"-webkit-text-combine\",\n    \"-webkit-text-decorations-in-effect\",\n    \"-webkit-text-emphasis-color\",\n    \"-webkit-text-emphasis-position\",\n    \"-webkit-text-emphasis-style\",\n    \"-webkit-text-fill-color\",\n    \"-webkit-text-orientation\",\n    \"-webkit-text-security\",\n    \"-webkit-text-stroke-color\",\n    \"-webkit-text-stroke-width\",\n    \"transform\",\n    \"transform-origin\",\n    \"transform-style\",\n    \"-webkit-user-drag\",\n    \"-webkit-user-modify\",\n    \"user-select\",\n    \"-webkit-writing-mode\",\n    \"-webkit-app-region\",\n    \"buffered-rendering\",\n    \"clip-path\",\n    \"clip-rule\",\n    \"mask\",\n    \"filter\",\n    \"flood-color\",\n    \"flood-opacity\",\n    \"lighting-color\",\n    \"stop-color\",\n    \"stop-opacity\",\n    \"color-interpolation\",\n    \"color-interpolation-filters\",\n    \"color-rendering\",\n    \"fill\",\n    \"fill-opacity\",\n    \"fill-rule\",\n    \"marker-end\",\n    \"marker-mid\",\n    \"marker-start\",\n    \"mask-type\",\n    \"shape-rendering\",\n    \"stroke\",\n    \"stroke-dasharray\",\n    \"stroke-dashoffset\",\n    \"stroke-linecap\",\n    \"stroke-linejoin\",\n    \"stroke-miterlimit\",\n    \"stroke-opacity\",\n    \"stroke-width\",\n    \"alignment-baseline\",\n    \"baseline-shift\",\n    \"dominant-baseline\",\n    \"text-anchor\",\n    \"writing-mode\",\n    \"vector-effect\",\n    \"paint-order\",\n    \"d\",\n    \"cx\",\n    \"cy\",\n    \"x\",\n    \"y\",\n    \"r\",\n    \"rx\",\n    \"ry\",\n    \"caret-color\",\n    \"line-break\"\n  ];\n\n  function SimpleScreenshot(params) {\n    this.devicePixelRatio = params.devicePixelRatio || 1;\n    this.error = params.error || function () {};\n    this.log = params.log || console.log;\n    this.puppeteerServer = params.puppeteerServer; // puppeteer 截屏服务\n    this.puppeteerGlobalFont = params.puppeteerGlobalFont; // puppeteer 截屏服务全局字体\n    this.pupServerCanModifyFont = params.pupServerCanModifyFont ? params.pupServerCanModifyFont : true; // puppeteer 截屏服务是否支持配置字体\n    this.imgType = params.imgType || 'jpeg'; //图片类型\n    this.imgQuality = parseInt(params.imgQuality) || 80; //图片质量\n    this.distWidth = params.distWidth; //目标尺寸\n    this.distHeight = params.distHeight;\n    this.debug = !params.debug ? false : true; // 调试模式\n\n    this.supportForeignObject = false; //是否支持 svg foreignobject 渲染\n    this.forceScreenshotType = params.forceScreenshotType; //强制截屏方式 server、client\n\n    if (this.forceScreenshotType == 'client') { //强制 client 截屏\n      this.supportForeignObject = true;\n    } else {\n      this.checkForeignObject();\n    }\n\n    this._isLoading = false; // 是否正在加载资源\n    this._wholeTexts = \"\"; // 全部文字\n    this._globalInlineFont = {\n      list: [],\n      value: \"\"\n    }; //全局字体\n    this.globalInlineFont = params.globalInlineFont || \"\";\n\n    //字体列表\n    this.fontList = [];\n    let fontList = params.fontList || [];\n    for (let i = 0; i < fontList.length; i++) {\n      this.fontList.push({\n        name: fontList[i],\n        texts: \"\",\n      });\n    }\n\n    //预加载资源\n    this.preLoadResource = params.preLoadResource || [];\n    for (let i = 0; i < this.preLoadResource.length; i++) {\n      let name = this.preLoadResource[i].name;\n      let data = this.preLoadResource[i].data;\n      if (data && data != \"\") {\n        RESOURCE_NAME.push(name);\n        RESOURCE_DATA.push(data);\n      }\n    }\n\n    /**\n     * 父元素的部分属性对子元素有影响，但是并不会被子元素继承，比如：opacity、transform、filter；\n     * 但是小程序中没办法获取父节点元素，目前的解决办法是手动计算，然后通过参数传递。\n     */\n    this.parentCSS = params.parentCSS || [{\n        name: \"opacity\",\n        value: 1,\n      },\n      {\n        name: dashTransform, // 因为是给子元素截图，父元素的 transform-origin 等属性可以不考虑\n        value: \"\",\n      },\n      {\n        name: \"filter\",\n        value: \"\",\n      },\n    ];\n\n    //自定义 css 解析过滤器\n    this.parseCSSFilter = params.parseCSSFilter || [];\n\n    /**\n     * 特殊规则\n     * autoRenderWidth 自适应渲染宽度，在小程序中因为字体原因，某些文字元素 fields size 并不精确，导致文字超出容器，从而溢出换行。\n     */\n    this.rules = {\n      autoRenderWidth: false,\n    };\n\n    this.analysisStyleSheets();\n  }\n\n  //解析 stylesheets\n  SimpleScreenshot.prototype.analysisStyleSheets = function () {\n    this._hasWidthNodes = [];\n    this._hasHeightNodes = [];\n    try {\n      let styleSheets = document.styleSheets;\n      for (let i = 0; i < styleSheets.length; i++) {\n        let sheet = styleSheets[i]\n        for (let j = 0; j < sheet.cssRules.length; j++) {\n          let rule = sheet.cssRules[j];\n          if (rule.type == 1) { // CSSStyleRule\n            if (rule.style.width) { // 找出样式中设置了固定宽度的元素\n              let nodes = document.querySelectorAll(rule.selectorText);\n              for (let z = 0; z < nodes.length; z++) {\n                if (rule.style.width) {\n                  if (!this._hasWidthNodes.includes[nodes[z]]) {\n                    this._hasWidthNodes.push(nodes[z]);\n                  }\n                }\n              }\n            }\n          } else if (rule.type == 3) { // CSSImportRule\n            //\n          } else if (rule.type == 4) { // CSSMediaRule\n            //\n          } else if (rule.type == 5) { // CSSFontFaceRule\n            this.loadResource({\n              name: rule.style.fontFamily,\n              value: rule.style.src\n            }, function () {}, function () {})\n          }\n        }\n      }\n    } catch (err) {\n      //\n    }\n  }\n\n  //判断浏览器是否支持 foreignobject 渲染\n  SimpleScreenshot.prototype.checkForeignObject = function () {\n    let svg = \"\";\n    svg += \"<svg xmlns='http://www.w3.org/2000/svg' width='1' height='1'>\";\n    svg += \"<foreignObject width='100%' height='100%'>\";\n    svg += \"<div xmlns='http://www.w3.org/1999/xhtml' style='width:100%;height:100%;background-color:red;'></div>\";\n    svg += \"</foreignObject>\";\n    svg += \"</svg>\"\n\n    let self = this;\n    let img = new Image();\n    img.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svg);\n    img.onload = function () {\n      let canvas = document.createElement('canvas');\n      canvas.width = 1;\n      canvas.height = 1;\n      let ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0, 1, 1);\n      let imgData = ctx.getImageData(0, 0, 1, 1).data;\n      if (imgData[0] == 255 && imgData[1] == 0 && imgData[2] == 0 && imgData[3] == 255) { // rgba(255, 0, 0, 255) 红色\n        self.supportForeignObject = true;\n      }\n    }\n  }\n\n  SimpleScreenshot.prototype.nodeItem = function (node, level) {\n    if (node.nodeType != Node.ELEMENT_NODE) {\n      return;\n    }\n\n    //获取元素信息\n    let tagName = node.tagName.toLowerCase();\n    let $node = {\n      node: node,\n      dataset: {\n        level: level,\n        name: tagName\n      },\n      style: {}, //自定义样式\n      after: null, //伪类样式\n      before: null\n    }\n    if (tagName == \"img\") {\n      $node.dataset.src = node.getAttribute(\"src\");\n    }\n    $node.computedStyle = window.getComputedStyle(node);\n    //伪类\n    let after = window.getComputedStyle(node, \":after\");\n    if (contentExit(after)) {\n      $node.after = after;\n    }\n    let before = window.getComputedStyle(node, \":before\");\n    if (contentExit(before)) {\n      $node.before = before;\n    }\n    this.nodes.push($node);\n\n    //子元素\n    let start = 0;\n    let childs = node.childNodes;\n    for (let i = 0; i < childs.length; i++) {\n      let child = childs[i];\n      if (child.nodeType == Node.ELEMENT_NODE) { //元素\n        this.nodeItem(child, level + '-' + start);\n        start++;\n      }\n    }\n  }\n\n  SimpleScreenshot.prototype.toSVG = function (selector, callback) {\n    this._wholeTexts = \"\";\n    this.nodes = [];\n\n    let $first = document.querySelector(selector);\n    this.nodeItem($first, 0);\n\n    let self = this;\n    this.parseCSSRules(function () {\n      self.root = self.getNodeByLevel(\"0\");\n      let rect = self.root.node.getBoundingClientRect();\n      let width = parseFloat(rect.width) * self.devicePixelRatio;\n      let height = parseFloat(rect.height) * self.devicePixelRatio;\n      let html = self.toHTML(self.root, true);\n\n      let svg = \"\";\n      svg += \"<svg xmlns='http://www.w3.org/2000/svg'\";\n      svg += \" width='\" + width + \"'\";\n      svg += \" height='\" + height + \"'\";\n      svg += \">\";\n      svg += \"<foreignObject width='100%' height='100%'>\";\n      svg += \"<div xmlns='http://www.w3.org/1999/xhtml' style='\";\n      if (self.root.display == \"inline-block\") { // 防止行内元素的布局被空白字符挤乱\n        svg += \"font-size : 0 ;\"\n      }\n\n      self.parentCSS = self.calcParentProperty(self.root)\n      for (let i = 0; i < self.parentCSS.length; i++) {\n        let pCSS = self.parentCSS[i];\n        pCSS.value = pCSS.value == null ? \"\" : (pCSS.value + \"\").trim();\n        if (pCSS.name == dashTransform) {\n          pCSS.value += \" scale(\" + self.devicePixelRatio + \")\" //考虑设备像素比\n        }\n        if (pCSS.value != \"\") {\n          svg += pCSS.name + \" : \" + pCSS.value + \" ;\";\n        }\n      }\n\n      svg += dashOrigin + \":0 0;'>\";\n      svg += html;\n      svg += \"</div>\";\n      svg += \"</foreignObject>\";\n      svg += \"</svg>\"\n\n      callback({\n        svg: svg,\n        width: rect.width,\n        height: rect.height,\n        devicePixelRatio: self.devicePixelRatio,\n        distWidth: self.distWidth ? self.distWidth : rect.width * self.devicePixelRatio, // 默认显示尺寸乘以设备像素比\n        distHeight: self.distHeight ? self.distHeight : rect.height * self.devicePixelRatio,\n        fonts: self.fontList,\n        imgType: self.imgType,\n        imgQuality: self.imgQuality\n      });\n\n    })\n  };\n\n  //父元素的部分属性对子元素有影响，但是并不会被子元素继承，比如：opacity、transform、filter\n  SimpleScreenshot.prototype.calcParentProperty = function ($node) {\n    let list = [{\n      name: \"opacity\",\n      value: 1,\n    }, {\n      name: dashTransform, //因为是给子元素截图，父元素的 transform-origin 等属性可以不考虑\n      value: \"\",\n    }, {\n      name: \"filter\",\n      value: \"\",\n    }];\n\n    let $target = $node.node.parentElement;\n\n    while ($target != null) {\n      let css = window.getComputedStyle($target);\n\n      for (let i = 0; i < list.length; i++) {\n        let property = list[i];\n        let value = css.getPropertyValue(property.name);\n        switch (property.name) {\n          case 'opacity':\n            value = value == null ? 1 : parseFloat(value);\n            property.value *= value;\n            break;\n          case 'filter':\n          case dashTransform:\n            value = (value == null || value == 'none') ? '' : (' ' + value);\n            property.value += value;\n            break;\n          default:\n            break;\n        }\n      }\n\n      $target = $target.parentElement;\n    }\n\n    return list;\n  }\n\n  SimpleScreenshot.prototype.toIMG = function (selector, callback) {\n    let self = this;\n    self.toSVG(selector, function (svg) {\n      if (self.supportForeignObject && self.forceScreenshotType != 'server') {\n        // 插入本地全局字体\n        let index = svg.svg.indexOf(\"</style>\");\n        svg.svg = svg.svg.substring(0, index) + self._globalInlineFont.value + svg.svg.substring(index, svg.svg.length);\n        self.debug && self.log(svg) // log\n        let base64 = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svg.svg);\n        self.toCanvas(base64, svg, function (canvas) {\n          callback({\n            canvas: canvas,\n            base64: canvas.toDataURL(`image/${svg.imgType}`, svg.imgQuality / 100)\n          });\n        })\n      } else {\n        if (self.puppeteerGlobalFont) {\n          if (!self.pupServerCanModifyFont) {\n            self.fontList.push({\n              name: self.puppeteerGlobalFont,\n              texts: self._wholeTexts\n            })\n          }\n          svg.globalFont = self.puppeteerGlobalFont; // 全局字体\n        }\n        self.debug && self.log(svg) // log\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", self.puppeteerServer);\n        // xhr.responseType = \"blob\"; // blob api、URL.createObjectURL 存在兼容性问题，返回数据类型使用 base64\n        xhr.onerror = function (err) {\n          self.error(err)\n        };\n        xhr.ontimeout = function (err) {\n          self.error(err)\n        };\n        xhr.onload = function () {\n          self.toCanvas(xhr.response, svg, function (canvas) {\n            callback({\n              canvas: canvas,\n              base64: xhr.response\n            });\n          })\n        };\n        xhr.send(JSON.stringify(svg));\n      }\n    })\n  }\n\n  SimpleScreenshot.prototype.toCanvas = function (base64, svg, callback) {\n    let img = new Image();\n    img.width = parseInt(svg.distWidth);\n    img.height = parseInt(svg.distHeight);\n    img.onload = function () {\n      let canvas = document.createElement('canvas');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      let ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      if (isFunction(callback)) {\n        callback(canvas)\n      }\n    }\n    img.src = base64;\n  }\n\n  //元素转换为 html 代码\n  SimpleScreenshot.prototype.toHTML = function (node, isRoot) {\n    let html = \"\";\n    let inner = \"\";\n\n    //解析自身\n    let cssTexts = this.parseCSS(node, isRoot);\n\n    //伪类\n    if (node.after) {\n      inner += \"<span style='\" + cssTexts.after + \"'></span>\";\n    }\n    if (node.before) {\n      inner += \"<span style='\" + cssTexts.before + \"'></span>\"\n    }\n\n    //解析子元素\n    let childs = node.node.childNodes;\n    let start = 0;\n    for (let i = 0; i < childs.length; i++) {\n      let child = childs[i];\n      if (child.nodeType == Node.ELEMENT_NODE) { //元素\n        let level = node.dataset.level + \"-\" + start;\n        let curNode = this.getNodeByLevel(level);\n        if (curNode) {\n          inner += this.toHTML(curNode, false);\n          start++;\n        }\n      } else {\n        let fontFamily = this.getNodeStyle(node, \"font-family\");\n        for (let z = 0; z < this.fontList.length; z++) { // 根据字体拆分文字\n          let fontItem = this.fontList[z];\n          if (fontFamily.includes(fontItem.name)) {\n            for (let k = 0; k < child.wholeText.length; k++) {\n              if (!fontItem.texts.includes(child.wholeText[k])) { //去重\n                fontItem.texts += child.wholeText[k];\n              }\n            }\n          }\n        }\n        for (let k = 0; k < child.wholeText.length; k++) { //全部文字\n          if (!this._wholeTexts.includes(child.wholeText[k])) {\n            this._wholeTexts += child.wholeText[k];\n          }\n        }\n\n        /**\n         * 拼接 xml 时如果文本节点中存在条件分割符 & 应该写成 &amp; 否则会报错 EntityRef: expecting ';'\n         */\n        inner += child.wholeText.replace(/[\\r\\n]/g, \"\").replace(/&/g, \"&amp;\"); //去掉换行符\n      }\n    }\n\n    //拼装\n    let tagName = node.dataset.name;\n    html += \"<\" + tagName + \" xmlns='http://www.w3.org/1999/xhtml'\";\n    if (node.dataset.src) {\n      let index = RESOURCE_NAME.indexOf(node.dataset.src);\n      if (index != -1) {\n        html += \" src='\" + RESOURCE_DATA[index] + \"'\";\n      } else {\n        html += \" src='\" + node.dataset.src + \"'\";\n      }\n    }\n    if (!isRoot) {\n      html += \" style='\" + cssTexts.style + \"'>\";\n    } else {\n      html += \" id='simple-screenshot'>\";\n      html += \"<style>\";\n      html += \"#simple-screenshot,#simple-screenshot *:not(style){\" + cssTexts.style + \"} \" + this.globalInlineFont;\n      html += \"</style>\";\n    }\n    html += inner;\n    html += \"</\" + tagName + \">\";\n\n    return html;\n  }\n\n  //解析 cssRules\n  SimpleScreenshot.prototype.parseCSS = function (node, isRoot) {\n    let style = \"\";\n    let after = \"\";\n    let before = \"\";\n\n    node._rules = {\n      autoRenderWidth: this.rules.autoRenderWidth\n    }\n\n    for (let i = 0; i < this.parseCSSFilter.length; i++) { //自定义 css 解析过滤器\n      let filter = this.parseCSSFilter[i];\n      if (isFunction(filter)) {\n        filter(node)\n      }\n    }\n\n    for (let i = 0; i < COMPUTED_STYLE.length; i++) {\n      let name = COMPUTED_STYLE[i];\n      if (isRoot) { //根节点\n        if ([\"margin-top\", \"margin-left\", \"margin-bottom\", \"margin-right\"].includes(name)) {\n          this.setNodeStyle(node, name, 0); //最外层元素的 margin 必须为 0，否则会因为偏移导致错位\n        } else if ([\"absolute\", \"fixed\"].includes(this.getNodeStyle(node, \"position\")) && [\"top\", \"bottom\", \"left\", \"right\"].includes(name)) {\n          this.setNodeStyle(node, name, 0); //最外层元素为绝对定位或者固定定位时，top、bottom、left、right 必须为 0，否则会因为定位偏移导致错位\n        }\n      } else { //非根节点\n        if (this.getNodeStyle(node, name) == this.getNodeStyle(this.root, name)) {\n          continue;\n        }\n      }\n\n      if (name == \"background-image\") { //背景图片\n        style += this.parseBackgroundImage(this.getNodeStyle(node, name));\n        if (node.after) {\n          after += this.parseBackgroundImage(node.after[name]);\n        }\n        if (node.before) {\n          before += this.parseBackgroundImage(node.before[name]);\n        }\n      } else {\n        let nodeV = this.getNodeStyle(node, name);\n        style += name + \":\" + nodeV + \";\";\n        if (name == \"font-family\") { //字体\n          let n1 = RESOURCE_NAME.indexOf(nodeV)\n          if (n1 != -1 && !this._globalInlineFont.list.includes(nodeV)) {\n            this._globalInlineFont.list.push(nodeV);\n            this._globalInlineFont.value += \"@font-face {font-family: '\" + nodeV + \"';src: url(\" + RESOURCE_DATA[n1] + \");}\"\n          }\n        }\n\n        if (node.after) {\n          let afterV = node.after[name];\n          after += name + \":\" + afterV + \";\";\n          if (name == \"font-family\") { //字体\n            let n2 = RESOURCE_NAME.indexOf(afterV)\n            if (n2 != -1 && !this._globalInlineFont.list.includes(afterV)) {\n              this._globalInlineFont.list.push(afterV);\n              this._globalInlineFont.value += \"@font-face {font-family: '\" + afterV + \"';src: url(\" + RESOURCE_DATA[n2] + \");}\"\n            }\n          }\n        }\n\n        if (node.before) {\n          let beforeV = node.before[name];\n          before += name + \":\" + beforeV + \";\";\n          if (name == \"font-family\") { //字体\n            let n3 = RESOURCE_NAME.indexOf(beforeV)\n            if (n3 != -1 && !this._globalInlineFont.list.includes(beforeV)) {\n              this._globalInlineFont.list.push(beforeV);\n              this._globalInlineFont.value += \"@font-face {font-family: '\" + beforeV + \"';src: url(\" + RESOURCE_DATA[n3] + \");}\"\n            }\n          }\n        }\n      }\n    }\n\n    if ((node._rules.autoRenderWidth || !this._hasWidthNodes.includes(node.node)) && !isRoot) {\n      style += \"width: auto;\";\n    }\n\n    return {\n      style: style,\n      after: after,\n      before: before\n    }\n  }\n\n  //解析\n  SimpleScreenshot.prototype.parseBackgroundImage = function (bgValue) {\n    let matches = null;\n    let style = \"\";\n    let isReplaceResource = false;\n    URL_REGEX.lastIndex = 0 //重置正则对象\n    matches = URL_REGEX.exec(bgValue) //匹配url值\n    if (matches != null) {\n      let url = matches[1];\n      if (bgValue && url && url.search(/^(data:)/) == -1) { //非dataurl\n        let index = RESOURCE_NAME.indexOf(url);\n        isReplaceResource = true;\n        if (index != -1) {\n          style += \"background-image : url(\" + RESOURCE_DATA[index] + \");\";\n        } else {\n          /**\n           * 拼接 xml 时如果 url 中存在条件分割符 &，应该写成 &amp; 否则会报错 EntityRef: expecting ';'\n           * 可以用 encodeURIComponent 编码来避免这个问题。\n           */\n          style += \"background-image : url(\" + encodeURIComponent(url) + \");\";\n        }\n      }\n    }\n    if (!isReplaceResource) {\n      style += \"background-image :\" + bgValue + \";\";\n    }\n\n    return style;\n  }\n\n  //设置节点样式\n  SimpleScreenshot.prototype.setNodeStyle = function (node, name, value) {\n    node.style[name] = value;\n  }\n\n  //获取节点样式\n  SimpleScreenshot.prototype.getNodeStyle = function (node, name) {\n\n    return (node.style[name] != null) ? node.style[name] : node.computedStyle[name];\n  }\n\n  //根据级别获取节点\n  SimpleScreenshot.prototype.getNodeByLevel = function (level) {\n    for (let i = 0; i < this.nodes.length; i++) {\n      if (this.nodes[i].dataset.level == level) {\n        return this.nodes[i];\n      }\n    }\n    return null;\n  }\n\n  //解析 cssRules\n  SimpleScreenshot.prototype.parseCSSRules = function (finished) {\n    let count = 0;\n    let self = this;\n    self._isLoading = false;\n    let add = function () {\n      self._isLoading = true;\n      count++;\n    };\n    let del = function () {\n      count--;\n      if (count == 0) {\n        self._isLoading = true;\n        finished();\n      }\n    };\n\n    for (let i = 0; i < this.nodes.length; i++) {\n      let node = this.nodes[i];\n\n      // img src\n      if (node.dataset.src && node.dataset.src.length > 0) {\n        this.loadResource({\n          value: \"url(\" + node.dataset.src + \")\"\n        }, add, del)\n      }\n\n      // background-image\n      let bgImg = node.computedStyle['background-image'];\n      if (bgImg && bgImg.length > 0 && bgImg != 'none') {\n        this.loadResource({\n          value: bgImg\n        }, add, del);\n      }\n\n      if (node.after) {\n        let afterImg = node.after['background-image']\n        if (afterImg && afterImg.length > 0 && afterImg != 'none') {\n          this.loadResource({\n            value: afterImg\n          }, add, del);\n        }\n      }\n\n      if (node.before) {\n        let beforeImg = node.before['background-image']\n        if (beforeImg && beforeImg.length > 0 && beforeImg != 'none') {\n          this.loadResource({\n            value: beforeImg\n          }, add, del);\n        }\n      }\n    }\n\n    if (count == 0) {\n      finished();\n    }\n  };\n\n  //根据后缀获取 dataurl 类型\n  SimpleScreenshot.prototype.getType = function (url) {\n    let types = [\".png\", \".jpg\", \".jpeg\", \".ttf\"];\n    let names = [\"image/png\", \"image/jpg\", \"image/jpg\", \"application/x-font-ttf\"];\n    for (let i = 0; i < types.length; i++) {\n      if (url.lastIndexOf(types[i]) + types[i].length == url.length) {\n        return names[i]\n      }\n    }\n    return names[0];\n  }\n\n  //加载外部资源\n  SimpleScreenshot.prototype.loadResource = function (resource, add, del) {\n    URL_REGEX.lastIndex = 0; //重置正则对象\n    let matches = URL_REGEX.exec(resource.value); //匹配url值\n    let self = this;\n    if (matches != null) {\n      let url = matches[1];\n      let name = resource.name ? resource.name : url;\n      if (\n        resource.value &&\n        url &&\n        !RESOURCE_NAME.includes(name) // 根据名称去重\n      ) {\n        let type = this.getType(url); // 检查类型\n        if (type != null) {\n          if (url.search(/^(data:)/) == -1) { // 非 dataurl\n            RESOURCE_NAME.push(name);\n            add();\n\n            let xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.timeout = 3000;\n            xhr.open(\"GET\", url, true);\n            xhr.onerror = function (err) {\n              self.error({\n                msg: `${url} request error`,\n                err: err,\n              });\n            };\n            xhr.ontimeout = function (err) {\n              self.error({\n                msg: `${url} request timeout`,\n                err: err,\n              });\n            };\n            xhr.onload = function () {\n              let reader = new FileReader();\n              reader.onload = function () {\n                self.debug && self.log({\n                  msg: `${url} request onload`,\n                });\n\n                let index = RESOURCE_NAME.indexOf(name);\n                RESOURCE_DATA[index] = reader.result;\n                del();\n              };\n              reader.readAsDataURL(xhr.response);\n            };\n            xhr.send();\n          } else if (resource.name) {\n            RESOURCE_NAME.push(name);\n            RESOURCE_DATA.push(url);\n          }\n        }\n      }\n    }\n  };\n\n  return SimpleScreenshot;\n});","(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = factory(require());\n    } else {\n        // Browser globals\n        window.Prefix = factory();\n    }\n}(function () {\n\n    var style = typeof document != 'undefined'\n        ? document.createElement('p').style\n        : {}\n\n    var prefixes = ['O', 'ms', 'Moz', 'Webkit']\n    var upper = /([A-Z])/g\n    var memo = {}\n\n    /**\n     * prefix `key`\n     * prefix('transform') // => WebkitTransform\n     *\n     * @param {String} key\n     * @return {String}\n     * @api public\n     */\n    function prefix(key){\n        // Camel case\n        key = key.replace(/-([a-z])/g, function(_, char){\n            return char.toUpperCase()\n        })\n\n        // Without prefix\n        if (style[key] !== undefined) return key\n\n        // With prefix\n        var Key = key.charAt(0).toUpperCase() + key.slice(1)\n        var i = prefixes.length\n        while (i--) {\n            var name = prefixes[i] + Key\n            if (style[name] !== undefined) return name\n        }\n\n        return key\n    }\n\n    /**\n     * Memoized version of `prefix`\n     *\n     * @param {String} key\n     * @return {String}\n     * @api public\n     */\n    function prefixMemozied(key){\n        return key in memo\n            ? memo[key]\n            : memo[key] = prefix(key)\n    }\n\n    /**\n     * Create a dashed prefix\n     *\n     * @param {String} key\n     * @return {String}\n     * @api public\n     */\n    function prefixDashed(key){\n        key = prefix(key)\n        if (upper.test(key)) {\n            key = key.replace(upper, '-$1')\n            upper.lastIndex = 0\n        }\n        return key.toLowerCase()\n    }\n\n    return {\n        prefix : prefixMemozied,\n        dash : prefixDashed\n    }\n}));"],"sourceRoot":""}